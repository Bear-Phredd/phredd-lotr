var JSON;JSON||(JSON={},function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,o,r,a,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;n<r;n+=1)a[n]=str(n,l)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;n<r;n+=1)"string"==typeof rep[n]&&(i=rep[n],o=str(i,l),o&&a.push(quote(i)+(gap?": ":":")+o));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(o=str(i,l),o&&a.push(quote(i)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;i<n;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()),function(e){"use strict";function t(){this._events={},this._maxListeners=10}function n(e,t,n,i,o){this.type=e,this.listener=t,this.scope=n,this.once=i,this.instance=o}n.prototype.fire=function(e){if(this.listener.apply(this.scope||this,e),this.once)return this.instance.removeListener(this.type,this.listener),!1},t.prototype.eachListener=function(e,t){var n=null,i=null,o=null;if(this._events.hasOwnProperty(e))for(i=this._events[e],n=0;n<i.length;n+=1)if(o=t.call(this,i[n],n),o===!1)n-=1;else if(o===!0)break;return this},t.prototype.addListener=function(e,t,i,o){return this._events.hasOwnProperty(e)||(this._events[e]=[]),this._events[e].push(new n(e,t,i,o,this)),this.emit("newListener",e,t,i,o),this._maxListeners&&!this._events[e].warned&&this._events[e].length>this._maxListeners&&("undefined"!=typeof console&&console.warn("Possible EventEmitter memory leak detected. "+this._events[e].length+" listeners added. Use emitter.setMaxListeners() to increase limit."),this._events[e].warned=!0),this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t,n){return this.addListener(e,t,n,!0)},t.prototype.removeListener=function(e,t){return this.eachListener(e,function(n,i){n.listener===t&&this._events[e].splice(i,1)}),this._events[e]&&0===this._events[e].length&&delete this._events[e],this},t.prototype.removeAllListeners=function(e){return e&&this._events.hasOwnProperty(e)?delete this._events[e]:e||(this._events={}),this},t.prototype.listeners=function(e){if(this._events.hasOwnProperty(e)){var t=[];return this.eachListener(e,function(e){t.push(e.listener)}),t}return[]},t.prototype.emit=function(e){var t=[],n=null;for(n=1;n<arguments.length;n+=1)t.push(arguments[n]);return this.eachListener(e,function(e){return e.fire(t)}),this},t.prototype.setMaxListeners=function(e){return this._maxListeners=e,this},e.EventEmitter=t}(this),window.__WSAPI||function(){var app="undefined"!=typeof _app?_app:{version:"4.4.37"};!function(e,t){var n,i,o,r,a=e[t]={},s=[];a.id=(+new Date+"").slice(-4),a.events=new function(){var e=["scroll","resize","blur","focus","keyup","keydown","keypress","instrumentationLoaded","pageload","keypress","mousemove","click","state","messageReceived","messageSent","ortcConnected","ortcDisconnected","zoneCreated","zoneRemoved","zoneView","bannerChange"];this.eventType={};var t=new EventEmitter;t.setMaxListeners(50),this.listeners=function(e){return t.listeners(e)},this.listen=function(e,n,i){return this.eventType[e]?void t.addListener(e,n,i):void a.log.warn("!invalid event name: '"+e+"'")},this.unlisten=function(e,n){t.removeListener(e,n)},this.emit=function(e){return this.eventType[e]?(n&&n.pageLogger("events",arguments[0]),void t.emit.apply(t,Array.prototype.slice.call(arguments,0))):void a.log.warn("!invalid event name: '"+e+"'")};var i=function(e,t){for(var n=0,i=e.length;n<i;n++)t[e[n]]=e[n]};i(e,this.eventType)};var l=function(){var e={info:0,warning:1,error:2,none:3},t=function(t,n,i){if(!a.globalParameters.win.console||e[n]<o)return"";var s=a.util.genDate()+"["+n+"]"+(i?"["+i+"] ":"")+t;return r&&!s.match(r)?"":s},i=function(e){r=!!e&&new RegExp(e,"i")},s=function(t){t=e[t],o=t?t:o};return{info:function(e,n){var i=t(e,"info",n);i&&console.info(i)},warn:function(e,n){var i=t(e,"warning",n);i&&console.warn(i)},err:function(e,i){var o=t(e,"error",i);o&&console.error(o),n&&n.pageLogger("errors",e,!0)},setFilter:i,setLevel:s}}();a.log={},a.log.info=function(e){l.info(e,t)},a.log.warn=function(e){l.warn(e,t)},a.log.err=function(e){l.err(e,t)};var c=new function(){var e=window.__wsconf;if(!e)throw new Error("script parameters not found!");var t=function(t,n,i,o){var r=e[t];return null==r?r=i:o&&(r="1"===r),r};this.getParam=function(e,n,i,o){return t(e,n,i,o)},this.print=function(){if(n)for(var t in e)n.pageLogger("params",t+": "+e[t],!0)}};a.getParam=function(e,t,n,i){var o=c.getParam(e,t,n,i);return o};var d=a.getParam("log","logData",{level:"none",filter:""});l.setLevel(d.level),l.setFilter(d.filter),i=a.getParam("tld","topLevelDomain",""),a.globalParameters={},a.globalParameters.clientData={session:a.getParam("sessionId","sessionId","0"),context:a.getParam("contextId","contextId","0"),section:window.__wsconf&&window.__wsconf.section.replace(/'\\'/g,"\\\\")||"",country:a.getParam("g_country","country",""),region:a.getParam("g_region","region",""),device:function(e){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))?"mobile":/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(e)?"tablet":"desktop"}(navigator.userAgent||navigator.vendor||window.opera)},a.globalParameters.device=function(e){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))?"mobile":/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(e)?"tablet":"desktop"}(navigator.userAgent||navigator.vendor||window.opera),a.globalParameters.useExternalEvents=a.getParam("uee","useExternalEvents",0),a.globalParameters.applicationId=a.getParam("appId","applicationId",""),a.globalParameters.publicId=a.getParam("cid","publicId",""),a.globalParameters.reportEndpoint=a.getParam("instancePath","instancePath","");for(var p=a.globalParameters.win=window;p!=p.top;){try{p.frameElement&&(a.globalParameters.win=p.parent)}catch(e){}p=p.parent}a.globalParameters.win.wsHost=window.wsHost;var u=a.getParam("sfo","scriptInFrameOn",2);a.globalParameters.scriptInFrameOn=2==u?a.globalParameters.win!=window.top:1==u,a.util=new function(){this.genDate=function(){var e=new Date;return"["+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+"] "},this.executeOnPredicate=function(e,t,n,i){i=i||0;var o=this;return i>=5?void a.log.warn("executeOnPredicate: max tries reached ("+i+") for function:"+e):void(t()?e():(i++,a.timers.timeout(function(){o.executeOnPredicate.call(o,e,t,n,i)},n||1e3)))},this.trim=function(e){return e=e||"",e.replace(/^\s+|\s+$/g,"")},this.cookies={createCookie:function(e,t,n){var o,r;if(n){var s=new Date;s.setTime(s.getTime()+24*n*60*60*1e3),o="; expires="+s.toGMTString()}else o="";r=i?"; domain="+i:"",a.globalParameters.win.document.cookie=e+"="+t+o+r+"; path=/"},readCookie:function(e){for(var t=e+"=",n=a.globalParameters.win.document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null},eraseCookie:function(e){this.createCookie(e,"",-1)}},this.bind=function(e,t,n,i){i=i||{},i.prefix="undefined"==typeof i.prefix||i.prefix,a.globalParameters.win.document.addEventListener?e.addEventListener(t,n):e.attachEvent((i.prefix?"on":"")+t,n)},this.unbind=function(e,t,n,i){i=i||{},i.prefix="undefined"==typeof i.prefix||i.prefix,a.globalParameters.win.document.addEventListener?e.removeEventListener(t,n):e.detachEvent((i.prefix?"on":"")+t,n)},this.extend=function(e,t){for(var n in t)e[n]=t[n]},this.objLength=function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n},this.filter=function(e,t){for(var n=[],i=e.length-1;i>-1;i--)t(e[i])&&n.push(e[i]);return n},this.getDocumentHeight=function(){return Math.max(a.globalParameters.win.document.body.scrollHeight,a.globalParameters.win.document.documentElement.scrollHeight,a.globalParameters.win.document.body.offsetHeight,a.globalParameters.win.document.documentElement.offsetHeight,a.globalParameters.win.document.body.clientHeight,a.globalParameters.win.document.documentElement.clientHeight)},this.getVpHeight=function(){return a.globalParameters.win.innerHeight||a.globalParameters.win.document.documentElement.clientHeight||a.globalParameters.win.document.body.clientHeight},this.getScrollTop=function(){return a.globalParameters.win.pageYOffset||a.globalParameters.win.document.body.scrollTop||a.globalParameters.win.document.documentElement.scrollTop||0},this.truncateNumber=function(e,t){var n=Math.pow(10,t);return Math.floor(e*n)/n}},a.timers=function(){var e=100,t={},n=function(){return Math.floor(1e8*Math.random())},i=function(){var e=+new Date;for(var n in t){var i=t[n];switch(i.type){case 0:i.timeElapsed+=e-i.lastTick,i.lastTick=e,i.timeElapsed>i.delay&&(i.callback(),delete t[n]);break;case 1:i.timeElapsed+=e-i.lastTick,i.lastTick=e,i.timeElapsed>i.delay&&(i.callback(),i.timeElapsed-=i.delay);break;case 2:i.timeElapsed+=e-i.lastTick,i.lastTick=e}}},o=function(e,i){var o=n();return t[o]={callback:e,delay:i,timeElapsed:0,lastTick:+new Date,type:0},o},r=function(e,i){var o=n();return t[o]={callback:e,delay:i,timeElapsed:0,lastTick:+new Date,type:1},o},s=function(){var e=n();return t[e]={timeElapsed:0,lastTick:+new Date,type:2},e},l=function(e){return t[e]?t[e].timeElapsed:0},c=function(e){t[e]&&delete t[e]};return a.globalParameters.win.setInterval(i,e),{timeout:o,interval:r,split:s,splitTime:l,clear:c}}(),a.extendAPI=function(e){m.extend(e)};var m=new function(e,t){var n=e[t]={};this.extend=function(e){a.util.extend(n,e)},this.addRef=function(e){e[t]=n}}(window,"__WSAPI");a.extendAPI({id:a.id,version:e.version}),a.register=function(t,n){e[t]=n,s.push(n),n.log={},n.log.info=function(e){l.info(e,t)},n.log.warn=function(e){l.warn(e,t)},n.log.err=function(e){l.err(e,t)}},a.init=function(){m.addRef(a.globalParameters.win);var t={},i=function(e){t[e]=function(t){a.events.emit(a.events.eventType[e],t)}},o=function(e){var n;t[e]=function(t){a.timers.clear(n),n=a.timers.timeout(function(){a.events.emit(a.events.eventType[e],t)},100)}},r=function(){a.util.bind(a.globalParameters.win,"keydown",t.keydown),a.util.bind(a.globalParameters.win.document.body,"mousemove",t.mousemove),"desktop"!=a.globalParameters.clientData.device&&(a.util.bind(a.globalParameters.win,"pageshow",t.focus),a.util.bind(a.globalParameters.win,"pagehide",t.blur)),!a.globalParameters.useExternalEvents&&document.hasFocus&&a.timers.interval(function(){a.globalParameters.win.document.hasFocus()?t.focus():t.blur()},500)};n=e.instrumentation,o("scroll"),o("resize"),i("blur"),i("focus"),o("keypress"),o("keydown"),i("click"),t.mousemove=function(){var e,t,n=!1;return function(i){e==i.screenX||t==i.screenY||n||(e=i.screenX,t=t=i.screenY,n=!0,a.events.emit(a.events.eventType.mousemove,i),a.timers.timeout(function(){n=!1},1e3))}}(),a.globalParameters.useExternalEvents?a.util.bind(window,"message",function(e){var n=JSON.parse(e.data);t[n.action]&&t[n.action](n)}):(a.util.bind(a.globalParameters.win,"scroll",t.scroll),a.util.bind(a.globalParameters.win,"touchmove",t.scroll),a.util.bind(a.globalParameters.win,"resize",t.resize),a.util.bind(a.globalParameters.win,"blur",t.blur),a.util.bind(a.globalParameters.win,"focus",t.focus),a.util.bind(a.globalParameters.win,"keypress",t.keypress),a.util.bind(a.globalParameters.win,"click",t.click)),a.events.listen(a.events.eventType.pageload,r),"complete"==a.globalParameters.win.document.readyState&&a.events.emit(a.events.eventType.pageload,null),a.util.bind(a.globalParameters.win,"load",function(e){a.events.emit(a.events.eventType.pageload,e)});for(var l=0,d=s.length;l<d;l++)s[l].init&&s[l].init();for(a.startTimeStamp=+new Date,l=0,d=s.length;l<d;l++)s[l].ready&&s[l].ready();a.globalParameters.win.postMessage("WS-READY","*"),a.util.cookies.createCookie("ws-refr",a.globalParameters.win.location.href,1/288),c.print()},"undefined"==typeof a.globalParameters.win.document.getElementsByClassName&&(a.util.bind(a.globalParameters.win.document,"focusin",function(){var e;return function(t){a.timers.clear(e),e=a.timers.timeout(function(){a.events.emit(a.events.eventType.focus,t)},200)}}()),a.util.bind(a.globalParameters.win.document,"focusout",function(){var e;return function(t){a.timers.clear(e),e=a.timers.timeout(function(){a.events.emit(a.events.eventType.blur,t)},200)}}())),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=t||0,i=this.length;n<i;n++)if(this[n]===e)return n;return-1}),a.globalParameters.win.document.getElementsByClassName||(a.globalParameters.win.document.getElementsByClassName=function(e){for(var t,n=[],i=new RegExp("\\b"+e+"\\b"),o=this.getElementsByTagName("*"),r=o.length;r--;)t=o[r],1==t.nodeType&&i.test(t.className)&&n.push(t);return n})}(app,"core"),function(app,module){var messaging={},core=app.core,instrumentation,MSG_VER="4.5",CONN_TIMEOUT=1e3,urlOrtcServer,isCluster,channelIn,channelOut,channelInPrefix,channelOutPrefix,channelLevel,authToken,appKey,heartbeatFails,heartbeatTime,appId=core.globalParameters.applicationId,clientData=core.globalParameters.clientData,ortcParams=core.getParam("ortc","ortcParams",{});urlOrtcServer=eval(ortcParams.url).split(","),urlOrtcServer=urlOrtcServer[Math.floor(Math.random()*urlOrtcServer.length)],isCluster=ortcParams.oic||!0,channelInPrefix=ortcParams.ich||"toClient:",channelOutPrefix=ortcParams.och||"fromClient:",channelLevel=ortcParams.chl||"normal",heartbeatFails=ortcParams.hbf||2,heartbeatTime=ortcParams.hbt||10,authToken=ortcParams.aut,appKey=ortcParams.apk,channelOut=channelOutPrefix+appId,channelIn=channelInPrefix+clientData.session+":"+clientData.context+("region"==channelLevel?":"+core.globalParameters.clientData.country+":"+core.globalParameters.clientData.country:"country"==channelLevel?":"+core.globalParameters.clientData.country:"");var instOrtcDisconnect=function(){return Ortc.disconnect(),"ORTC disconnect..."},instOrtcConnect=function(){return Ortc.connect(),"ORTC connect..."},instOrtcIsConnected=function(){return"ORTC "+(Ortc.isConnected()?"":"not")+" connected"};core.events.listen(core.events.eventType.instrumentationLoaded,function(){instrumentation=app.instrumentation,instrumentation.addOper("ortc - disconnect",instOrtcDisconnect),instrumentation.addOper("ortc - connect",instOrtcConnect),instrumentation.addOper("ortc - isConnected",instOrtcIsConnected)}),core.events.listen(core.events.eventType.messageSent,function(e){var t=1==e.sent?"":0==e.sent?"!":"*";instrumentation&&instrumentation.pageLogger("messages","--> "+t+e.message)}),core.events.listen(core.events.eventType.messageReceived,function(e){instrumentation&&instrumentation.pageLogger("messages","<-- "+e)});var Ortc=function(){function e(e,t,n){core.events.emit(core.events.eventType.messageReceived,n)}function t(e,t,n){return p?(u&&(u.send(n||channelOut,e),core.events.emit(core.events.eventType.messageSent,{message:e,channel:channelOut,sent:t||1})),!0):(messaging.log.info("Ortc: not connected. buffering message to resend: "+e),m&&g.push({message:e,channel:n||channelOut}),core.events.emit(core.events.eventType.messageSent,{message:e,channel:channelOut,sent:0}),!1)}function n(){for(var e;p&&(e=g.splice(0,1)).length>0;)t(e[0].message,2,e[0].channel)}function i(){p=!0,messaging.log.info("Ortc: connected"),o(channelIn,e),o(channelInPrefix+"public",e),u.setConnectionMetadata(f()),n(),core.events.emit(core.events.eventType.ortcConnected,+new Date)}function o(e,t){u.subscribe(e,!0,t),messaging.log.info("Ortc: subscribing to channel:'"+e+"'")}function r(){p=!1,messaging.log.info("Ortc: disconnected"),core.events.emit(core.events.eventType.ortcDisconnected,+new Date)}function a(e,t){messaging.log.info("Ortc: subscribed to channel:'"+t+"'")}function s(e){messaging.log.info("Ortc: unsubscribed from channel:'"+e.channel+"'")}function l(e,t){messaging.log.err("Ortc: exception:'"+t+"'")}function c(){messaging.log.info("Ortc: reconnected"),u.setConnectionMetadata(f()),p=!0,n(),core.events.emit(core.events.eventType.ortcConnected,+new Date)}function d(){p=!1,messaging.log.info("Ortc: reconnecting"),core.events.emit(core.events.eventType.ortcDisconnected,+new Date)}var p,u,m=!0,g=[],f=function(){var e=messaging.Message.create();e.addAction("cd"),e.addVersion(MSG_VER);var t=e.toString();return t},v=function(){var e=f();return loadOrtcFactory(IbtRealTimeSJType,function(t,n){return null!=n?(messaging.log.err("Ortc: error connecting to ORTC"),!1):void(null!=t&&(u=t.createClient(),null!=e&&u.setConnectionMetadata(e),u.setHeartbeatActive(!0),u.setHeartbeatFails(heartbeatFails),u.setHeartbeatTime(heartbeatTime),u.setId("client"),u.setConnectionTimeout(CONN_TIMEOUT),isCluster?u.setClusterUrl(urlOrtcServer):u.setUrl(urlOrtcServer),u.onConnected=i,u.onSubscribed=a,u.onUnsubscribed=s,u.onException=l,u.onDisconnected=r,u.onReconnecting=d,u.onReconnected=c,u.connect(appKey,authToken)))}),!0},y=function(){u.connect(appKey,authToken)},h=function(){u.disconnect()},b=function(){return u&&u.getIsConnected()},w=function(e){m=e};return{init:v,setResend:w,send:t,connect:y,disconnect:h,isConnected:b}}();messaging.disconnect=function(){Ortc.setResend(!1),Ortc.disconnect()},messaging.connect=function(){Ortc.setResend(!0),Ortc.connect()},messaging.isConnected=Ortc.isConnected;var Message=new function(){var e="|",t=0,n=1,i=2,o=3,r=4,a=function(a){var s,l,c=[],d=[],p=function(e){return encodeURIComponent(e)},u=function(e){l=+new Date,s=e.sep,c[t]=e.version,c[n]=e.action,c[i]=e.applicationId,c[o]=e.sessionId,c[r]=e.contextId};this.add=function(e,t){t&&(e=p(e)),c.push(e)},this.addAction=function(e){c[n]=e},this.addVersion=function(e){c[t]=e},this.field=function(e){var t;switch(e){case"action":t=c[n];break;default:t=null}return t},this.toString=function(){var e=c;return d.length>1&&(e=e.concat(d)),e.join(s)},this.fieldSeparator=e,u(a)};this.create=function(){var t={};return t.sep=e,t.id="",t.action="",t.version="",t.applicationId=appId,t.sessionId=clientData.session,t.contextId=clientData.context,new a(t)}};messaging.sendMessage=function(e,t){Ortc.send(e,null,t)},messaging.sendViewportState=function(e){var t=Message.create();t.addAction("su"),t.addVersion(MSG_VER),t.add(clientData.country),t.add(clientData.section),t.add(e.trackers),t.add(e.zones),t.add(e.creatives),t.add(e.orderLines),t.add(e.slots),t.add(e.hover),t.add(e.state),messaging.sendMessage(t.toString())},messaging.sendZoneNotification=function(e){var t=Message.create();t.addAction(e.action),t.addVersion(MSG_VER),t.add(clientData.country),t.add(clientData.section),t.add(e.zone),t.add(e.isTrackingUnit?1:0),messaging.sendMessage(t.toString())},messaging.sendScrollData=function(e){var t=Message.create();t.addAction("sd"),t.addVersion(MSG_VER),t.add(clientData.section),t.add(e.timeUntilScroll),t.add(e.maxScroll),t.add(e.scrollSpeed),t.add(e.scrollUpSpeed),t.add(e.scrollDownSpeed)},messaging.sendStartNotification=function(){},messaging.sendTwoSecondsNotification=function(){},messaging.sendFiveSecondsNotification=function(){},messaging.sendTenSecondsNotification=function(){},messaging.sendFirstTwoSecondsNotification=function(){},messaging.sendFirstFiveSecondsNotification=function(){},messaging.sendFirstTenSecondsNotification=function(){},messaging.sendFirstGtsNotification=function(){},messaging.sendLogNotification=function(e){var t=Message.create();t.addAction("ln"),t.addVersion(MSG_VER),t.add(clientData.country),t.add(clientData.section),t.add(e.logType),t.add(e.adUnitId),t.add(e.creativeId),t.add(e.orderLineId),t.add(e.orderId),messaging.sendMessage(t.toString())},messaging.Message=Message,messaging.init=function(){core.util.executeOnPredicate(function(){Ortc.init()},function(){return!!window.loadOrtcFactory}),messaging.log.info("init messaging"),messaging.sendStartNotification()},core.register(module,messaging)}(app,"messaging"),function(e,t){var n,i,o,r,a,s,l,c,d={},p=e.core,u=p.globalParameters.win.document.all&&!p.globalParameters.win.atob,m=e.messaging,g=[],f=!1;e.core.register(t,d),o=p.getParam("znl","zoneList",{}),r=1e3*p.getParam("mpi","maxPingInterval",30),c=p.getParam("instancePath","instancePath",""),i=1e3*p.getParam("frt","firstRotationTime",20),a=p.getParam("mui","maxUnitInstances",10)-1,s=p.getParam("dads","globalDnr",0),l=1e3*p.getParam("met","minimumExposureTime",5);var v=function(){var e=!1,t=[],i=function(e){if(!e.overlay){var t=p.globalParameters.win.document.createElement("DIV");t.setAttribute("class","wsOverlay"),t.setAttribute("style","width:0px;height:0px"),e.overlay=p.globalParameters.win.document.createElement("DIV"),t.appendChild(e.overlay),e.element.insertBefore(t,e.element.firstChild),e.overlay.style.position="relative",e.overlay.style.overflow="visible",e.overlay.style.outline="3px solid "+(e.ctx.inview()?"green":"red"),e.overlay.style.width=e.width+"px",e.overlay.style.height=e.height+"px",e.overlay.style.zIndex=2147483647,e.overlay.style.backgroundColor="rgba(0,0,0,0.6)",e.overlay.style.textShadow="-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black",e.overlay.style.color="white";var n=p.globalParameters.win.document.createElement("DIV");n.innerHTML="ID: "+e.id,n.style.position="absolute",n.style.backgroundColor=e.isTrackingUnit?"yellow":"red",n.style.right="0px",e.overlay.appendChild(n);var i=e.ctx.currentEntry(),o=p.globalParameters.win.document.createElement("DIV");e.orderData=o,o.innerHTML=i?"type:"+i.typ+"<br>creative/line: "+i.cid+"/"+i.ol+"<br>pursuit: "+i.pursuit+"<br>strategy: "+i.os+"<br>priority: "+i.op:"",o.style.position="absolute",o.style.left="0px",o.style.bottom="0px",e.overlay.appendChild(o)}e.overlay.style.display="block"},o=function(e){e.overlay&&(e.overlay.style.display="none")};return p.events.listen(p.events.eventType.zoneView,function(t){e&&(!t.overlay&&i(t),t.overlay.style.outlineColor=t.ctx.inview()?"green":"red")}),{status:function(){return e},onChange:function(e){t.push(e)},toggle:function(){d.zone.each(e?o:i),e=!e;for(var r=t.length-1;r>-1;r--)t[r]();n.updateOptions("highlightZones",e)}}}(),y=function(e){if(!e||e.length>3)return"<span style='color:red'>Syntax:[adUnitId];[criativeId]?;[orderLineId]?</span>";var t=d.zone.getZone(e[0].match("\\.")?e[0]:e[0]+".00");return t?(t.ctx.nextBanner(!0,e[1],e[2],{ignoreDnr:!0}),"<span style='color:green'>SUCESS</span>"):"<span style='color:red'>Invalid Ad Unit Id</span>"};p.events.listen(p.events.eventType.bannerChange,function(e){if(e.orderData){var t=e.ctx.currentEntry();e.orderData.innerHTML="type:"+t.typ+"<br>creative/line: "+t.cid+"/"+t.ol+"<br>pursuit: "+t.pursuit+"<br>strategy: "+t.os+"<br>priority: "+t.op}}),p.events.listen(p.events.eventType.instrumentationLoaded,function(){n=e.instrumentation,n.highlightZones=v;var t=n.getOptions();t.highlightZones&&n.highlightZones.toggle(),b.loadDebug(),n.addOper("zones - highlight",n.highlightZones.toggle),n.addOper("zone - next banner",y)});var h=function(e){e=e.replace(/\[RANDOM\]/g,Math.floor(1e8*Math.random()));var t=p.globalParameters.win.document.createElement("IMG");t.setAttribute("style","width:0;height:0;display:none;"),t.setAttribute("src",e),p.globalParameters.win.document.body.appendChild(t)},b=new function(){var e,t,i,o,r,a,s,l,u=-1,g=["inactive","active","idle"],f=!0,v=!1,y=!1,b=!1,w=function(e){if(u!=e){switch(y&&!b&&(m.connect(),I()),y=!1,e){case 1:0==u&&(v=!0,p.timers.timeout(function(){v=!1},50)),p.timers.clear(s),o&&p.util.cookies.eraseCookie("ws-idl","",-1),x();break;case 0:r&&(s=p.timers.timeout(function(){m.disconnect(),y=!0},a)),o&&p.util.cookies.eraseCookie("ws-idl","",-1),p.timers.clear(l);break;case 2:r&&(s=p.timers.timeout(function(){m.disconnect(),y=!0},a)),o&&p.util.cookies.createCookie("ws-idl","1",1)}u=e,T(),d.log.info("State: "+u);var t={index:u,name:g[u]};d.zone.each(function(e){e.ctx.onStateChange(t)}),p.events.emit(p.events.eventType.state,t)}},x=function(){i&&(p.timers.clear(l),l=p.timers.timeout(function(){w(2)},e))},k=function(e){e=e||{},!f||"mousemove"!=e.eventName&&"mousemove"!=e.type?0!=u&&(x(),w(1)):f=!1},P=function(){!v&&w(0)},S=function(){0==u&&w(1)},C=function(){return i=!i,i?(p.events.listen(p.events.eventType.scroll,k),p.events.listen(p.events.eventType.mousemove,k),p.events.listen(p.events.eventType.keypress,k),p.events.listen(p.events.eventType.keydown,k),x()):(p.events.unlisten(p.events.eventType.scroll,k),p.events.unlisten(p.events.eventType.mousemove,k),p.events.unlisten(p.events.eventType.keypress,k),p.events.unlisten(p.events.eventType.keydown,k),p.timers.clear(l)),"idle "+(i?"on":"off")};this.getState=function(){return{index:u,name:g[u]}},this.toggleIdle=C;var I=function(){var e=c+"/cr?appId="+p.globalParameters.applicationId+"&vId="+p.globalParameters.clientData.session+"&ts="+ +new Date;h(e)},z=function(){return t=!t,t?(p.events.listen(p.events.eventType.blur,P),p.events.listen(p.events.eventType.focus,S)):(p.events.unlisten(p.events.eventType.blur,P),p.events.unlisten(p.events.eventType.focus,S)),"focus "+(t?"on":"off")};this.loadDebug=function(){n.addOper("focus - toggle",z),n.addOper("idle - toggle",C)},this.init=function(){var n=p.getParam("smc","stateManagerConfiguration",{});return p.globalParameters.win!=p.globalParameters.win.top&&!p.globalParameters.useExternalEvents&&1==n.useVisibilityAPI&&p.globalParameters.win.document.visibilityState?(i=!1,w("visible"==p.globalParameters.win.document.visibilityState?1:0),0!=n.useFocus&&p.util.bind(p.globalParameters.win.document,"visibilitychange",function(){
"visible"==p.globalParameters.win.document.visibilityState?S():P()}),void(n.forceDisconnectAfter&&p.timers.timeout(m.disconnect,1e3*n.forceDisconnectAfter))):(t=0!=n.useFocus,i=0!=n.useIdle,e=1e3*(n.idleTimer||19),o=0!=n.idleCookie,r=0!=n.disconnectInactiveUsers,a=1e3*(n.disconnectTimer||60),w(t&&(!p.globalParameters.scriptInFrameOn&&p.globalParameters.win.document.hasFocus?!p.globalParameters.win.document.hasFocus():document.visibilityState&&"hidden"==p.globalParameters.win.document.visibilityState)?0:o&&p.util.cookies.readCookie("ws-idl")?2:1),t&&(p.events.listen(p.events.eventType.blur,P),p.events.listen(p.events.eventType.focus,S)),i&&(p.events.listen(p.events.eventType.scroll,k),p.events.listen(p.events.eventType.mousemove,k),p.events.listen(p.events.eventType.keypress,k),p.events.listen(p.events.eventType.keydown,k),p.events.listen(p.events.eventType.click,k)),void p.timers.interval(I,72e5))}};d.currentState=b.getState,new function(){var e,t,n,i=0,o=!1,r=0,a=0,s=0,l=0,c=0,d=p.timers.split(),u=function(){var u=(+new Date,p.util.getScrollTop());p.timers.clear(n),i=Math.max(i,u/(p.util.getDocumentHeight()-p.util.getVpHeight())),e||(e=p.timers.splitTime(d),p.timers.clear(d));var m=p.timers.splitTime(t);m?(r>u?(a+=r-u,s+=m-o):(l+=u-r,c+=m-o),o=m):(t=p.timers.split(),o=0),r=u,n=p.timers.timeout(function(){p.timers.clear(t),g()},2e3)},g=function(){var t=1e3*(l+a)/(c+s),n=1e3*a/s,o=1e3*l/c;if(m.sendScrollData({timeUntilScroll:e,maxScroll:i>-1?p.util.truncateNumber(i,4):1,scrollSpeed:!isNaN(t)&&isFinite(t)?p.util.truncateNumber(t,2):0,scrollUpSpeed:!isNaN(n)&&isFinite(n)?p.util.truncateNumber(n,2):0,scrollDownSpeed:!isNaN(o)&&isFinite(o)?p.util.truncateNumber(o,2):0}),c<0){var r=p.globalParameters.win.document.createElement("IMG");r.setAttribute("style","width:0;height:0;display:none;"),r.src=p.globalParameters.win.location.protocol+"//services.webspectator.com/logClientError/scrollSpeed/"+l+"/"+a+"/"+s+"/"+c+"/"+ +new Date,p.globalParameters.win.document.body.appendChild(r)}};p.util.bind(p.globalParameters.win,"scroll",u)},p.events.listen(p.events.eventType.messageReceived,function(e){switch(e=JSON.parse(e),e.action){case"gtsNotice":var t,n;e.adUnitId?(t=d.zone.getZone(e.adUnitId),k(t),"overlay"==t.type?t.onGts():p.timers.timeout(function(){try{n=t.ctx.currentEntry(),"GTSDeluxe"!=n.ot||n.timeInView>=l?t.ctx.nextBanner():n.waitingForRotation=!0}catch(e){}},500)):d.zone.each(function(i){n=i.ctx.currentEntry(),n&&e.creativeId==n.cid&&(t||(t=i,k(t)),"overlay"==t.type?t.onGts():!n.me||n.timeInView>=l?i.ctx.nextBanner():n.waitingForRotation=!0)});break;case"ping":x();break;case"pushCampaign":var i=[];d.zone.each(function(t){var n=t.ctx.currentEntry(),o=e.data[n.cw+"*"+n.ch];if(o){i.push(n);var r=document.createElement("IMG");r.src=o,r.style.width=n.cw+"px",r.style.height=n.ch+"px",n.container.parentNode.appendChild(r),n.container.style.display="none",n.forceNotInView=r}}),setTimeout(function(){for(var e=i.length;--e>-1;){var t=i[e];t.container.parentNode.removeChild(t.forceNotInView),t.forceNotInView=null,t.container.style.display="inline-block"}T()},5e3),T()}});var w=[],x=function(){var e,t;return function(){e||(e=p.globalParameters.win.document.createElement("DIV"),e.setAttribute("style","position:fixed;width:15px;height:15px;background-color:red;bottom:5px;right:5px;z-index:2147483647"),p.globalParameters.win.document.body.appendChild(e)),p.timers.clear(t),e.style.display="block",t=p.timers.timeout(function(){e.style.display="none"},5e3)}}(),k=function(e){try{var t=e.ctx.currentEntry();if((!t.tpi||t.trackable)&&t.cid>0&&!t.gtsCompleted){var n=(t.rp||c)+"/gts?appid="+p.globalParameters.applicationId+"&sid="+p.globalParameters.clientData.session+"&auid="+e.shortId+"&olid="+t.ol+"&oid="+t.o+"&ci="+t.cid+"&acid="+t.acid+"&cw="+t.cw+"&ch="+t.ch+"&iid="+t.iid+"&is="+t.index+(t.sgid?"&sgid="+t.sgid:"")+"&s="+p.globalParameters.clientData.section+"&r="+t.r+"&ts="+(+new Date+"");if(t.tpi&&(n+="&tpi="+t.tpi),t.ats&&(n+="&ats="+t.ats),h(n),t.externalUrl&&("GTSPremium"==t.ot||"GTSStandard"==t.ot))for(var i=t.externalUrl.split("|"),o=i.length;--o>-1;)h(i[o]);t.gtsCompleted=!0}}catch(e){}},P=new function(){var e,t=function(e){parseInt(e.timeInView/e.pGtsDuration)>e.gtsCompleted&&(e.gtsCompleted++,m.sendZoneNotification({action:"pgtsi",zone:e.shortId,isTrackingUnit:e.isTrackingUnit}),1==e.gtsCompleted&&m.sendFirstGtsNotification())},n=function(e){parseInt(e.timeInView/i)>=1&&(e.rotateOnClient=!1,e.ctx.nextBanner())},o=function(e){parseInt(e.timeInView/2e3)>e.twoSecondsCompleted&&(e.twoSecondsCompleted++,m.sendTwoSecondsNotification(),1==e.twoSecondsCompleted&&m.sendFirstTwoSecondsNotification())},r=function(e){parseInt(e.timeInView/5e3)>e.fiveSecondsCompleted&&(e.fiveSecondsCompleted++,m.sendFiveSecondsNotification(),1==e.fiveSecondsCompleted&&m.sendFirstFiveSecondsNotification())},a=function(e){parseInt(e.timeInView/1e4)>e.tenSecondsCompleted&&(e.tenSecondsCompleted++,m.sendTenSecondsNotification(),1==e.tenSecondsCompleted&&m.sendFirstTenSecondsNotification())},s=function(e){try{if(1!=b.getState().index)return;var n=+new Date;if(!e.ctx.inview()&&n-e.lastUpdate<1500){e.timeInView+=n-e.lastUpdate,t(e);var i=e.ctx.currentEntry();i&&(i.timeInView=i.timeInView?i.timeInView+n-e.lastUpdate:n-i.start,i.waitingForRotation&&i.timeInView>=l&&(i.waitingForRotation=!1,e.ctx.nextBanner())),o(e),r(e),a(e)}e.lastUpdate=n}catch(e){}},c=function(n){var i=+new Date;1!=n.index?(p.timers.clear(e),d.zone.each(function(e){if(e.ctx.inview()&&i-e.lastUpdate<1500){e.timeInView+=i-e.lastUpdate,t(e),o(e),r(e),a(e);var n=e.ctx.currentEntry();n&&(n.timeInView=n.timeInView?n.timeInView+i-e.lastUpdate:i-n.start,n.waitingForRotation&&n.timeInView>=l&&(n.waitingForRotation=!1,e.ctx.nextBanner()))}e.lastUpdate=i})):(d.zone.each(function(e){e.lastUpdate=i}),e=p.timers.interval(u,500))},u=function(){var e=+new Date;d.zone.each(function(i){if(i.ctx.inview()&&e-i.lastUpdate<1500){i.timeInView+=e-i.lastUpdate,t(i),o(i),r(i),a(i),i.rotateOnClient&&n(i);var s=i.ctx.currentEntry();s&&(s.timeInView=s.timeInView?s.timeInView+e-i.lastUpdate:e-s.start,s.waitingForRotation&&s.timeInView>=l&&(s.waitingForRotation=!1,i.ctx.nextBanner()))}i.lastUpdate=e})};this.init=function(){1==b.getState().index&&(e=p.timers.interval(u,500)),p.events.listen(p.events.eventType.state,c),p.events.listen(p.events.eventType.zoneView,s)}},T=function(){var e,t,n=100,i=function(){p.timers.clear(t),t=p.timers.timeout(function(){if(m.isConnected()){var t=b.getState().index,n={tracking:[],zones:[],creatives:[],orderLines:[],slots:[],hover:-1},i=p.util.filter(w,function(e){try{return d.zone.getZone(e).ctx.inview()}catch(e){return!1}}),o=0;d.zone.each(function(e){var t=e.ctx.inview()&&(0==i.length||i.indexOf(e.id)>-1);if(e.isTrackingUnit)n.tracking.push(t?e.id+":1":e.id+":0");else{var r=e.ctx.currentEntry();n.zones.push(!t||r&&r.forceNotInView?e.id+":0":e.id+":1"),n.creatives.push(r?r.cid:""),n.orderLines.push(r?r.ol:""),n.slots.push(r?r.index:"0"),e.ctx.isInteracting()&&(n.hover=o),o++}}),m.sendViewportState({trackers:n.tracking.join(","),zones:n.zones.join(","),creatives:n.creatives.join(","),orderLines:n.orderLines.join(","),slots:n.slots.join(","),hover:n.hover,state:t}),p.timers.clear(e),e=p.timers.interval(function(){m.sendViewportState({trackers:n.tracking.join(","),zones:n.zones.join(","),creatives:n.creatives.join(","),orderLines:n.orderLines.join(","),slots:n.slots.join(","),hover:n.hover,state:t})},r)}},n)};return p.events.listen(p.events.eventType.zoneView,i),p.events.listen(p.events.eventType.bannerChange,i),p.events.listen(p.events.eventType.ortcConnected,i),i}();if(navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&navigator.userAgent.match(/AppleWebKit/)){var S=0;p.globalParameters.win.document.addEventListener("touchmove",function(){var e=+new Date;e-S>2e3&&(T(),S=e)},!1)}var C=function(e){d.zone.each(function(t){f=e,t.ctx.toggleForceOffView(f)})};d.zone=new function(){var t={},n=function(n){var i=o[n.id.toString()]||{};if(!n.id)return!1;var r=0,s=-1,l=new RegExp("^"+n.id+"\\.(\\d{2})$");for(var u in t)if(t.hasOwnProperty(u)){var g=l.exec(u);g&&(r++,s=Math.max(s,g[1]))}if(r>a)return!1;p.util.extend(n,i),n.id+="."+("0"+(s+1)).slice(-2),t[n.id]=n,"overlay"==n.type&&w.push(n.id),d.zone.checkDnr(n),n.events=p.events,n.clientData=p.globalParameters.clientData,n.userState=b.getState().index,n.lastUpdate=+new Date,n.timeInView=0,n.gtsCompleted=0,n.twoSecondsCompleted=0,n.fiveSecondsCompleted=0,n.tenSecondsCompleted=0,n.pGtsDuration=i.pgd?1e3*i.pgd:2e4,n.isTrackingUnit=i.tu,n.remove=function(e){d.zone.deleteZone(n.id,e)};try{n.ctx.size={w:1,h:1},n.ctx.emptyFirst=function(){n.rotateOnClient=!0},n.ctx.wshost=c,n.ctx.attachScript(!n.fp),f&&n.ctx.toggleForceOffView(f),n.ctx.log=d.log}catch(e){}"viewable"==i.type&&(n.ctx.visibilityThreshold=i.conf.Threshold),"sticky"==i.type&&e.dynamic.sticky(n.id),"inread"==i.type&&e.dynamic.inread(n.id);var v=n.ctx.currentEntry();n.fp||v&&v.tpi||(n.rotateOnClient=!0);var y,h=function(){y||(y=p.timers.timeout(function(){m.sendZoneNotification({action:"piabi",zone:n.shortId,isTrackingUnit:n.isTrackingUnit}),p.events.unlisten(p.events.eventType.zoneView,x),p.events.unlisten(p.events.eventType.focus,P),p.events.unlisten(p.events.eventType.blur,T)},1e3))},x=function(e){if(e.id==n.id){try{n.ctx.inview()?0!=b.getState().index&&h():(p.timers.clear(y),y=null)}catch(e){}k()}},k=function(){},P=function(){try{n.ctx.inview()&&h()}catch(e){}},T=function(){p.timers.clear(y),y=null};p.events.listen(p.events.eventType.zoneView,x),p.events.listen(p.events.eventType.focus,P),p.events.listen(p.events.eventType.blur,T);try{n.ctx.inview()&&x(n)}catch(e){}return m.sendZoneNotification({action:"pstdi",zone:n.shortId,isTrackingUnit:n.isTrackingUnit}),p.events.emit(p.events.eventType.zoneCreated,n),!0};this.getZone=function(e){return t[e]},this.each=function(e,n){var i;for(var o in t)try{if(i=e(t[o],o),"undefined"!=typeof i&&0==i)break}catch(e){}n&&n()},this.deleteZone=function(e,n){var i=t[e];if(i){delete t[e];var o=w.indexOf(e);return o>-1&&w.splice(o,1),!n&&i.ctx.del(),T(),p.events.emit(p.events.eventType.zoneRemoved,i),!0}return!1},this.clearZones=function(){for(var e in t)d.zone.deleteZone(e),T()},this.zones=function(){return t},this.init=function(){if(p.globalParameters.win.ws_zones)for(var e=0;e<p.globalParameters.win.ws_zones.length;e++){var t=p.globalParameters.win.ws_zones[e];n(t)}p.globalParameters.win.ws_zones={push:n},P.init(),p.timers.interval(function(){d.zone.each(function(e){try{e.ctx.checkDetachment()}catch(t){e.remove(!0)}})},1e3)},this.checkDnr=function(e){if(s)return void(e.dnr=1);var t=e.element.outerHTML;if(e.element.querySelectorAll)for(var n=e.element.querySelectorAll("iframe"),i=n.length-1;i>-1;i--)try{t+=n[i].contentDocument.body.outerHTML}catch(e){}t.match("ws-dnr")&&(e.dnr=1)}};var I=function(e,t){if(!t)return void d.log.warn("Add Zone: no element provided.");var n=p.globalParameters.win.document.createElement("IFRAME");n.setAttribute("style","border-width:0px"),n.style.display="none",n.style.margin="0px auto",n.src="about:blank",t.appendChild(n);var i=n.contentDocument?n.contentDocument:n.contentWindow?n.contentWindow.document:n.document;i.open("text/html","replace"),i.write("<html><head></head><body style='margin:0px;overflow:hidden;'><script>var ws_unit = {'id': '"+e+"', 'dynamic':1}</script><script type='text/javascript' src ='//wfpscripts.webspectator.com/ws-ad.js'></script></body></html>"),u||i.close()},z=function(e,t,n){!arguments||arguments.length<3?console.error("Incorrect syntax: addCustomTargeting(<id>,<key>,<value>) expected"):d.zone.each(function(i){i.shortId==e&&(!i.ct&&(i.ct={}),i.ct[t]=n)})},E=function(e,t){!arguments||arguments.length<2?console.error("Incorrect syntax: removeCustomTargeting(<id>,<key>) expected"):d.zone.each(function(n){n.shortId==e&&n.ct&&(p.util.objLength(n.ct)>1?delete n.ct[t]:n.ct=null)})},O=function(e){!arguments||arguments.length<1?console.error("Incorrect syntax: clearCustomTargeting(<id>) expected"):d.zone.each(function(t){t.shortId==e&&(t.ct=null)})};p.extendAPI({zones:{add:I,remove:function(e){var t=e.split(".");t.length>1?d.zone.deleteZone(e):d.zone.each(function(t){t.shortId==e&&d.zone.deleteZone(t.id)}),T()},removeAll:d.zone.clearZones,addCustomTargeting:z,removeCustomTargeting:E,clearCustomTargeting:O}}),d.requestStatusUpdate=T,p.events.listen(p.events.eventType.pageload,function(){d.zone.each(function(e){d.zone.checkDnr(e),e.ctx.forceCheckView()});for(var e in o){var t=o[e];t.conf&&(t.id=e,g.push(t))}if(p.globalParameters.win.jwplayer)try{for(var n=0;p.globalParameters.win.jwplayer(n).id;n++)p.globalParameters.win.jwplayer(n).onFullscreen(function(e){C(e.fullscreen)})}catch(e){}}),d.ready=function(){d.log.info("ready tracking")},d.init=function(){b.init(),u||d.zone.init(),d.log.info("init tracking")},d.dynamicZones=function(){return g},p.events.listen(p.events.eventType.pageload,function(){u&&d.zone.init()})}(app,"tracking"),function(e,t){var n,i,o,r={},a=e.core,s=e.tracking,l="//wfpscripts.webspectator.com/resources/",c=!1,d="transition",p="transitionend",u="webkit Moz O MS Khtml".split(" "),m=!1,g=a.globalParameters.win.document.all&&!a.globalParameters.win.atob;o=a.getParam("dfm","dfm",0);var f=function(e){var t=e.replace(/px/,"");return""==t||"auto"==t?0:parseInt(t)},v=function(){return a.globalParameters.win.innerWidth||a.globalParameters.win.document.documentElement.clientWidth||a.globalParameters.win.document.body.clientWidth},y=function(e){return e.offsetWidth||f(b(e).width)||f(e.style.width)},h=function(e){return e.offsetHeight||f(b(e).height)||f(e.style.height)},b=function(e){var t=null;return e.currentStyle?t=e.currentStyle:a.globalParameters.win.getComputedStyle&&(t=a.globalParameters.win.document.defaultView.getComputedStyle(e,null)),t};a.events.listen(a.events.eventType.instrumentationLoaded,function(){});var w=function(e){var t=s.zone.getZone(e),n=function(){var e=function(){var e=a.util.getScrollTop(),n=a.util.getDocumentHeight();y||h||(l=t.absTop),!w&&y&&e+t.conf.TopOffset<=l&&(t.element.style.position=d,t.element.style.left=p,t.element.style.top=m,t.element.style.zIndex=s,t.element.style.width=u,t.element.style.textAlign=g,t.element.style.margin=f,y=!1,h=!1,o?o.style.display="none":t.isTrackingUnit||(r.style.display="none")),!w&&y&&n-e-t.conf.TopOffset-t.height<t.conf.BottomHeight?(t.element.style.position="fixed",t.element.style.top="",t.element.style.bottom=t.conf.BottomHeight+"px",t.element.style.zIndex=t.conf.Zindex||2147483647,y=!1,h=!0):!w&&!y&&e+t.conf.TopOffset>l&&n-e-t.conf.TopOffset-t.height>=t.conf.BottomHeight&&(t.element.style.position="fixed",t.element.style.zIndex=t.conf.Zindex||2147483647,o||t.isTrackingUnit?(t.element.style.bottom="",t.element.style.left=c+"px",t.element.style.top=t.conf.TopOffset+"px",t.element.style.margin="0px",o&&(o.style.display="block")):(t.element.style.top="0px",t.element.style.left="0px",t.element.style.margin="0px",t.element.style.width="100%",r.style.display="block",t.element.style.textAlign="center"),y=!0,h=!1)},n=function(){for(var e=v.offsetLeft+p,n=v;"HTML"!=n.nodeName&&n.offsetParent;)n=n.offsetParent,e+=n.offsetLeft;c=e,y&&(t.element.style.left=c+"px")},i=function(){t.element.style.position=d,t.element.style.left=p,t.element.style.top=m,y=!1,o.style.display="none",w=!0};if(t){var o,r,s=t.element.style.zIndex||"",l=t.top,c=t.left,d=t.element.style.position,p=""==t.element.style.left?0:parseInt(t.element.style.left.substring(0,t.element.style.left.length-2)),u=t.element.style.width,m=t.element.style.top,g=t.element.style.textAlign,f=b(t.element).margin||t.element.style.margin,v=t.element.parentNode,y=!1,h=!1,w=!1;"mobile"==a.globalParameters.device||t.isTrackingUnit?"mobile"==a.globalParameters.device&&(r=a.globalParameters.win.document.createElement("DIV"),r.style.backgroundColor="lightgray",r.style.position="absolute",r.style.width="100%",r.style.height="100%",r.style.top="0px",r.style.zIndex=-1,r.style.display=y?"block":"none",r.setAttribute("class","wsOverlay"),t.element.appendChild(r)):(o=a.globalParameters.win.document.createElement("IMG"),o.src="//wfpcreatives.webspectator.com/resources/close.png",o.setAttribute("class","wsOverlay"),o.style.zIndex=t.conf.Zindex||2147483647,o.onclick=i,o.style.top="0px",o.style.right="-10px",o.style.position="absolute",o.style.display=y?"block":"none",t.element.appendChild(o)),a.globalParameters.win.attachEvent?a.globalParameters.win.attachEvent("onscroll",e):a.globalParameters.win.addEventListener("scroll",e),a.events.listen(a.events.eventType.resize,n),e(),t.ctx.forceCheckView()}};m?n():a.events.listen(a.events.eventType.pageload,n)},x=function(e){if(e.conf&&e.conf.sizes&&e.conf.sizes[0]){var t,n,i=e.id,o=e.conf.sizes[0].width,r=e.conf.sizes[0].height,l=e.conf.ShowDelay||1,c=e.conf.BottomHeight||0,d=e.isTrackingUnit,p=!1,u=!1,m=function(){if(!p&&!u){if(t)t.style.display="block",n.style.display="block";else{if(t=a.globalParameters.win.document.createElement("DIV"),a.globalParameters.win.document.body.appendChild(t),t.style.width="100%",t.style.height=r+"px",t.style.position="fixed",t.style.bottom="0px",t.style.left="0px",t.style.right="0px",t.style.zIndex=2147483646,d&&(t.style.pointerEvents="none"),t.setAttribute("class","ws-adhesion-bar"),n=a.globalParameters.win.document.createElement("DIV"),t.appendChild(n),n.setAttribute("class","ws-adhesion-banner"),n.style.backgroundColor="lavender",n.style.border="1px solid lightgray",n.style.width=o+"px",n.style.height=r+"px",n.style.position="absolute",n.style.left="0px",n.style.right="0px",n.style.zIndex=2147483647,n.style.margin="0px auto",!d&&"mobile"!=a.globalParameters.clientData.device){var e=a.globalParameters.win.document.createElement("DIV");a.util.bind(e,"click",function(){g(),u=!0}),e.style.cursor="pointer",e.style.height="100%",e.style.width="25px",e.innerHTML="&times;",e.style.borderRight="1px solid lightgray",e.style.position="absolute",e.style.backgroundColor="#ECECEC",e.setAttribute("class","wsOverlay ws-adhesion-close"),e.style.top="0px",e.style.right="-25px",e.style.fontSize="16px",e.style.textAlign="center",e.style.color="gray",n.appendChild(e)}a.globalParameters.win.__WSAPI.zones.add(i,n)}p=!0}},g=function(){p&&(t.style.display="none",n.style.display="none",s&&s.zone.getZone(i+".00").ctx.forceCheckView(),p=!1)},f=function(){a.util.getScrollTop()+a.util.getVpHeight()+c<=a.util.getDocumentHeight()?m():g()};a.timers.timeout(function(){f(),a.events.listen(a.events.eventType.resize,f,this),a.events.listen(a.events.eventType.scroll,f,this)},l)}},k=function(e){if(e.conf&&e.conf.sizes&&e.conf.sizes[0]){var t,n,i,o,r,c,u=e.id,m=e.conf.sizes[0].width,g=e.conf.sizes[0].height,f=e.conf.CannotViewAdUnits,y={pos:e.conf.HorizontalPosition||"right",dist:e.conf.HorizontalOffset||0},h={pos:e.conf.VerticalPosition||"bottom",dist:e.conf.VerticalOffset||0},w=100,x=2,k=!1,P=e.conf.AdUnitsViewOffsetThreshold,T=e.conf.MinimumScroll,S=e.conf.MinimumWindowWidth,C=!1,I=!!a.util.cookies.readCookie("ws-obp"),z=function(){t.style.width=m+"px",t.style.height=g+"px",o.style.display="none",o.style.zIndex=2147483646,"center"!=y.pos?o.style[y.pos]=y.dist+"px":o.style.setProperty?(o.style.setProperty("margin","0 auto","important"),o.style.setProperty("left","0px","important"),o.style.setProperty("right","0px","important")):(o.style.setAttribute("margin","0 auto","important"),o.style.setAttribute("left","0px","important"),o.style.setAttribute("right","0px","important")),o.style[h.pos]=h.dist+"px",o.style.position="fixed",o.style.width=m+20+"px",o.style.height=g+30+"px",o.style.backgroundColor="#f2f2f2",o.style.border="1px solid #cccccc","bottom"==h.pos?o.style.borderRadius="5px 5px 0px 0px":o.style.borderRadius="0px 0px 5px 5px",t.style.margin="0px auto",t.style.bottom="2px",d&&(o.style[d]=h.pos+" "+x+"s",I||(o.style[h.pos]=g*-1+"px",o.style[h.pos],o.style[h.pos]=h.dist+"px")),V()},E=function(e){var t,i=o;C?e?(t=parseInt(i.style[h.pos].substr(0,i.style[h.pos].length-2))+10,i.style[h.pos]=t+"px",t>=h.dist&&(C=!C,a.timers.clear(n),s&&s.zone.getZone(u+".00").ctx.forceCheckView())):(t=parseInt(i.style[h.pos].substr(0,i.style[h.pos].length-2))-10,i.style[h.pos]=t+"px",t<=g*-1-10&&(C=!C,a.timers.clear(n),s&&s.zone.getZone(u+".00").ctx.forceCheckView())):(C=!C,n=a.timers.interval(function(){E(e)},x/w*1e3))},O=function(){o.style.display="block",r&&(A(),s&&s.zone.getZone(u+".00").ctx.forceCheckView())},D=function(){o.style.display="none",r&&(V(),s&&s.zone.getZone(u+".00").ctx.forceCheckView())},L=function(){var e=a.globalParameters.win.document.createElement("DIV");e.style.width=m+"px",e.style.margin="0px auto",e.style.height="20px",e.style.position="relative";var t=a.globalParameters.win.document.createElement("IMG");t.src=l+"logo.png",t.style.width="16px",t.style.paddingTop="2px",t.style.display="inline",e.appendChild(t);var n=a.globalParameters.win.document.createElement("IMG");return n.id="WS-slider-toggle","bottom"==h.pos?n.src=l+"btn_fechar.png":n.src=l+"btn_expandir.png",n.style.paddingTop="6px",n.style.paddingLeft="2px",n.style.right="0px",n.style.width="9px",n.style.position="absolute",n.style.cursor="pointer",r=!I,a.util.bind(n,"click",function(){_()}),e.appendChild(n),d&&(o.style[d]="bottom "+x+"s"),a.util.bind(o,p,function(){s&&s.zone.getZone(u+".00").ctx.forceCheckView()}),c=n,e},A=function(){"bottom"==h.pos?c.src=l+"btn_fechar.png":c.src=l+"btn_expandir.png",b(o)[h.pos],t.style.display="block",d?o.style[h.pos]=h.dist+"px":E(!0)},V=function(){"bottom"==h.pos?c.src=l+"btn_expandir.png":c.src=l+"btn_fechar.png",o.style.top="",t.style.display="none",d?o.style[h.pos]=o.style.height.substring(0,o.style.height.length-2)*-1+20+"px":E(!1)},_=function(){r=!r,r?(a.util.cookies.eraseCookie("ws-obp"),A()):(a.util.cookies.createCookie("ws-obp",1,5/1440),V()),s&&s.zone.getZone(u+".00").ctx.forceCheckView()},M=function(){if(!s.zone.getZone(u+".00").fetching){var e=!1;if(f)for(var t=0;t<f.length;t++){var n=s.zone.getZone(f[t]+".00");if(n){if(P){var i="top"==h.pos?h.dist+a.util.getScrollTop():a.util.getVpHeight()-h.dist-g+a.util.getScrollTop();e=i<n.top+n.height+P&&i>n.top-P-g&&n.ctx.inview()}else e=n.ctx.inview();if(e)break}}v()<S||e||a.util.getScrollTop()+a.util.getVpHeight()<T?(D(),k=!1):!k&&s&&1==s.currentState().index&&(O(),k=!0)}};t=a.globalParameters.win.document.createElement("DIV"),o=a.globalParameters.win.document.createElement("DIV"),t.setAttribute("data-pid",u),i=L(),z(),"bottom"==h.pos?(o.appendChild(i),o.appendChild(t)):(o.appendChild(t),o.appendChild(i),i.style.bottom="0px",t.style.marginTop="10px",i.style.position="absolute",i.style.left="10px"),t.style.display="none",a.globalParameters.win.document.body.appendChild(o),a.globalParameters.win.__WSAPI.zones.add(u,t);var N=function(e){e.shortId==u&&e.ctx.currentEntry().ol&&((f||T)&&((P||T)&&(a.events.listen(a.events.eventType.scroll,M),a.events.listen(a.events.eventType.resize,M)),f&&a.events.listen(a.events.eventType.zoneView,M)),a.events.listen(a.events.eventType.focus,M),a.events.unlisten(a.events.eventType.bannerChange,N),M())};a.events.listen(a.events.eventType.bannerChange,N)}},P=function(e){if(!a.globalParameters.win.document.querySelector)return void s.log.err("This functionality is not supported by your browser.");if(e.conf&&e.conf.sizes&&0!=e.conf.sizes.length){var t=a.globalParameters.win.document.querySelector(e.conf.DockElementSelector);if(t){var n,i=e.id,o=e.conf.Position||"right",r=e.conf.sizes[0].width,l=e.conf.sizes[0].height,c=e.conf.Visib/100||.5,d=0,p=e.conf.MustContainAdUnits,u=e.conf.CannotContainAdUnits,m=e.conf.HorizontalOffset||0,g=e.conf.MaxScroll,f=e.conf.FooterDist,h=e.conf.StickyTopOffset||0,b=e.conf.UseElementTopOffset,w=e.conf.InitialTopOffset,x=e.conf.Type||"dynamic",k=e.conf.Zindex||1,P=(e.conf.SectionIsBlacklist,e.conf.Sections,function(){var e=t.offsetLeft;b&&(w=t.offsetTop);for(var n=t;n.offsetParent&&"BODY"!=n.offsetParent.nodeName.toUpperCase();)n=n.offsetParent,e+=n.offsetLeft,b&&(w+=n.offsetTop);return"left"==o?e-r-10+m:e+10+y(t)+m}),T=function(){f&&a.util.getScrollTop()+l>a.util.getDocumentHeight()-f?4!=d&&(n.style.position="absolute",n.style.top="",n.style.bottom=f+"px",!n.offsetParent.style.position&&(n.offsetParent.style.position="relative"),d=4):g&&g<a.util.getScrollTop()?3!=d&&(d=3,n.style.position="absolute",n.style.top=g+"px",n.style.bottom=""):a.util.getScrollTop()+h<w&&1!=d?(n.style.position="absolute",n.style.top=w+"px",n.style.bottom="",d=1):a.util.getScrollTop()+h>=w&&2!=d&&(n.style.position="fixed",n.style.top=h+"px",n.style.bottom="",d=2)},S=function(){n?n.style.display="block":(n=a.globalParameters.win.document.createElement("DIV"),a.globalParameters.win.document.body.appendChild(n),n.style.width=r+"px",n.style.height=l+"px",n.style.zIndex=k,n.setAttribute("class","ws-wss ws-wss-"+o),"absolute"==x?(n.style.position="absolute",n.style.top=w+"px"):(a.globalParameters.win.attachEvent?a.globalParameters.win.attachEvent("onscroll",function(){T()}):a.globalParameters.win.addEventListener("scroll",function(){T()}),T()),a.globalParameters.win.__WSAPI.zones.add(i,n))},C=function(){n&&(n.style.display="none")},I=function(){var e=P();n.style.left=e+"px"},z=function(){return P()>-1*r*(1-c)&&P()<v()-r*c},E=function(){z()?(S(),I()):C()},O=!0;if(p&&p.length>0){O=!1;var D=s.zone.zones();for(var L in D)if(O=p.indexOf(parseInt(D[L].shortId))>-1)break}if(u&&u.length>0&&O)for(var A=0;A<u.length;A++)if(s.zone.getZone(u[A]+".00")){O=!1;break}O&&(E(),a.events.listen(a.events.eventType.resize,E))}}},T=function(e){var t=s.zone.getZone(e);if(t.conf&&t.conf.sizes&&t.conf.sizes[0]){var n=document.createElement("IFRAME"),i=t.conf.Muted,o=t.conf.sizes[0].width,r=t.conf.sizes[0].height,c=!1,u=function(){t.element.style.height=r+18+"px",a.util.unbind(a.globalParameters.win,"scroll",v)},m=function(){t.element.style.height="0px",n.contentWindow.jwplayer().remove()},g=function(){var e=document.createElement("DIV");e.style.width="100%",e.setAttribute("class","wsOverlay");var n=document.createElement("a");n.setAttribute("style","float:right;cursor:pointer;height:18px"),n.innerHTML='<img style="vertical-align: top;margin-top: -1px;" alt="close" src="//wfpcreatives.webspectator.com/resources/inread_close.png" width="18" height="18">',n.onclick=m,e.appendChild(n),t.element.insertBefore(e,t.element.firstChild)},f=function(){n.setAttribute("style","border-width:0px"),n.style.display="none",n.style.width=o+"px",n.style.height=r+"px",n.style.margin="0px auto",n.name="inread",n.src="about:blank",t.element.appendChild(n);var e=n.contentDocument?n.contentDocument:n.contentWindow?n.contentWindow.document:n.document;e.open("text/html","replace");for(var s=encodeURIComponent(location.href),c=encodeURIComponent(s),d=+ +new Date,u=t.conf.MarketWaterfall,g=u.length-1;g>-1;g--)u[g]=u[g].replace(/{random}/g,d).replace(/{pageurl}/g,s).replace(/{pageurl1}/g,c);n.contentWindow.loaded=function(){n.contentWindow.jwplayer("video").setup({file:l+"blank.mp4",image:"",width:'"'+o+'"',height:'"'+r+'"',primary:i?"html5":"flash",autostart:"false",repeat:"false",logo:{file:l+"pubpoweredbyws.png",link:"http://www.webspectator.com"},advertising:{client:"vast",schedule:{myAds:{offset:"pre",tag:u}}}}),n.style.display="block",n.contentWindow.jwplayer().onAdComplete(function(){m()}),a.util.bind(a.globalParameters.win,"scroll",v),a.events.listen(a.events.eventType.state,v),a.util.bind(t.element,p,t.ctx.forceCheckView),v()},e.write("<html><head></head><body style='margin:0px;overflow:hidden;'><div id='video'></div><script type='text/javascript' src ='//content.jwplatform.com/libraries/lzzZgEru.js'></script><script defer='defer'>loaded()</script></body></html>")},v=function(){if(!c&&1==s.currentState().index){var e=a.util.getScrollTop(),o=e+a.util.getVpHeight(),l=t.top,d=l+r+18;(e>=l&&o<=d||(Math.min(d,o)-Math.max(e,l+18))/r>.5)&&(c=!0,n.contentWindow.jwplayer().onAdError(m),n.contentWindow.jwplayer().onAdImpression(u),n.contentWindow.jwplayer().play(),i&&n.contentWindow.jwplayer().setMute(!0),i&&n.contentWindow.jwplayer().setVolume(0))}};t.dnr=!0,g(),f(),t.element.style[d]="height 1s",t.element.style.maxWidth=o+"px"}},S=function(){var e={},t=!1,n=function(n){if(t=!0,n.conf&&n.conf.sizes&&n.conf.sizes[0]){var i=n.conf.sizes[0].width+"*"+n.conf.sizes[0].height;e[i]||(e[i]=[]),e[i].push(n)}},i=function(){if(!a.globalParameters.win.document.querySelectorAll)return void s.log.err("Autotag Ad Unit: this functionality is not supported by your browser.");if(t)for(var n=a.globalParameters.win.document.querySelectorAll("iframe"),i=n.length-1;i>-1;i--){var o=n[i],r=y(o)+"*"+h(o);if(e[r])for(var l=e[r].length-1;l>-1;l--){var c=e[r][l];if(o.id&&o.id.match(c.conf.Selector)&&!o.id.match("passback")&&(!c.conf.Source||o.src&&o.src.match(c.conf.Source))&&!o.parentNode.getAttribute("ws-zone")){a.globalParameters.win.__WSAPI.zones.add(c.id,o.parentNode);break}}}};return{add:n,start:i}}(),C=function(e){if(e.conf&&e.conf.sizes&&e.conf.sizes[0]){var t=e.conf.sizes[0].width,n=e.conf.sizes[0].height,i=document.createElement("DIV"),o=document.createElement("DIV"),r=document.createElement("IMG"),c=e.conf.BorderRadius||5,d=e.conf.BorderColor||"white",p=e.conf.BackgroundColor||"rgb(0, 0, 0)",u=e.conf.BackgroundOpacity||.5,m=function(){i.style.display=""},g=function(){document.body.removeChild(i),s.zone.deleteZone(e.id+".00")},f=function(){o.style.width=t+"px",o.style.height=n+"px",o.style.margin="0px auto",o.style.position="relative",o.style.padding="5px",o.style.border="1px solid black",o.style.backgroundColor=d,o.style.borderRadius=c+"px",y(),i.appendChild(o),a.globalParameters.win.__WSAPI.zones.add(e.id,o)},v=function(){r.src=l+"close-button.png",r.style.zIndex=2147483647,r.style.cursor="pointer",r.setAttribute("class","wsOverlay"),o.appendChild(r),"desktop"==a.globalParameters.clientData.device?(r.style.position="absolute",r.style.top="-10px",r.style.right="-10px",r.setAttribute("class","wsOverlay")):(r.style.position="fixed",r.style.top="10px",r.style.left="10px")},y=function(){o.style.top=(a.util.getVpHeight()-n)/2+"px"},h=function(){i.style.position="fixed",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.style.backgroundColor=p.replace(")",","+u+")").replace("rgb","rgba"),i.style.zIndex=2147483647,i.style.display="none",a.util.bind(i,"click",g),document.body.appendChild(i),f(),v()};a.events.listen(a.events.eventType.bannerChange,function(t){t.shortId==e.id&&t.ctx.currentEntry().ol&&(m(),s.zone.getZone(e.id+".00").onGts=g)}),h()}};!function(){if(o){var e=function(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t]&&"object"==typeof e[t]&&e[t]._width_&&e[t]._height_)return[e[t]._width_,e[t]._height_]},t=function(e){n(e.slot)},n=function(t,n,i){try{var o=t.getResponseInformation();if(!o)return;var s=!o.creativeId,l=googletag.pubads().enableAsyncRendering()?document.querySelector("#"+t.getSlotElementId().replace(/!|"|#|\$|%|&|\(|\)|'|\*|\+|,|\-|\.|\/|:|;|<|=|>|\?|@|\[|\\|\]|\^|`|\{|\||\}|~/g,"\\$&")+" > div[id^=google_ads_iframe_]"):document.getElementById(t.getSlotElementId()+"_ad_container");if(!n||!i){var c=e(t);c&&(n=c[0],i=c[1])}if(l&&n&&i){var d=t.getTargeting("wsRotSlot");mappingUrl=a.globalParameters.reportEndpoint+"/adunitMapping?eaup="+t.getAdUnitPath()+"&eolid="+o.lineItemId+"&eci="+o.creativeId+"&w="+n+"&h="+i+"&wsRotSlot="+(d.length>0?d[0]:"")+"&isda="+(s?1:0);var p=a.globalParameters.win.document.createElement("IFRAME");p.setAttribute("style","border-width:0px"),p.style.display="none",p.style.margin="0px auto",p.src="about:blank",l.appendChild(p);var u=p.contentDocument?p.contentDocument:p.contentWindow?p.contentWindow.document:p.document;u.open("text/html","replace"),u.write("<html><head></head><body style='margin:0px;overflow:hidden;'><script src='"+mappingUrl+"'></script>"),g||u.close()}}catch(e){r.warn("Failed to create DFP ad unit "+t.getAdUnitPath()+" on page "+window.location.url.href)}},i=function(){if(a.globalParameters.win.googletag&&a.globalParameters.win.googletag.pubadsReady){for(var e=googletag.pubads().getSlots(),o=e.length;--o>-1;)n(e[o]);
googletag.pubads().addEventListener("slotRenderEnded",t)}else a.timers.timeout(i,500)};i()}}(),r.sticky=w,r.inread=T,a.events.listen(a.events.eventType.pageload,function(){if(m=!0,a.globalParameters.win==a.globalParameters.win.top){if("undefined"!=typeof a.globalParameters.win.document.body.style.transition&&(c=!0),c===!1)for(var e=0;e<u.length;e++)if(void 0!==a.globalParameters.win.document.body.style[u[e]+"Transition"]){i=u[e],d=i+"Transition",p=d+"End";break}I(s.dynamicZones()),S.start(),a.util.bind(a.globalParameters.win,"popstate",function(){a.timers.clear(n),n=a.timers.interval(S.start,1e3),a.timers.timeout(function(){a.timers.clear(n)},5e3)})}});var I=function(e){for(;e.length>0;){var t=e.pop();if(!t)return;switch(t.type){case"inread":case"viewable":case"normal":case"sticky":if(t.conf.ContainerElementSelector){if(!a.globalParameters.win.document.querySelectorAll){s.log.err("Selector Ad Unit: this functionality is not supported by your browser.");break}for(var n=a.globalParameters.win.document.querySelectorAll(t.conf.ContainerElementSelector),i=n.length-1;i>-1;i--){var l,c=n[i];switch(t.conf.ElementSelectorPosition){case"before":l=a.globalParameters.win.document.createElement("DIV"),l.setAttribute("style","width:"+t.conf.sizes[0].width+"px;height:"+t.conf.sizes[0].height+"px;clear:both"),c.parentNode.insertBefore(l,c),c=l;break;case"after":l=a.globalParameters.win.document.createElement("DIV"),l.setAttribute("style","width:"+t.conf.sizes[0].width+"px;height:"+t.conf.sizes[0].height+"px;clear:both"),c.parentNode.insertBefore(l,c.nextSibling),c=l}"inread"==t.type&&(c.style.height="0px",c.style.overflow="hidden"),a.globalParameters.win.__WSAPI.zones.add(t.id,c)}}break;case"bottom":t.conf.Device.toLowerCase().indexOf(a.globalParameters.clientData.device)>-1&&x(t);break;case"slider":k(t);break;case"side":P(t);break;case"allocation":if(o)break;case"autotag":S.add(t);break;case"overlay":C(t);break;default:r.log.warn("Dynamic type "+t.type+"is NYI!")}}};r.ready=function(){r.log.info("ready dynamic")},r.init=function(){r.log.info("init dynamic")},e.core.register(t,r)}(app,"dynamic"),function(e,t){var n,i,o,r={},a=e.core,s=e.tracking,l=[],c=function(){if(i||(!o&&(o=a.timers.interval(c,500)),i=a.globalParameters.win.frames["WS-listener"]),i){for(;0!=l.length;)i.postMessage(l.shift(),"*");a.util.bind(i,"message",p),a.timers.clear(o)}},d=function(e,t){var n={type:e,data:t};l.push(n),c()},p=function(e){switch(e.data.action){case"changeBanner":s.zone.getZone(e.data.adUnitId).ctx.nextBanner(!0,e.data.creative,e.data.line,{ignoreDnr:1,ignorePov:1});break;case"toggleOverlay":n.highlightZones.toggle();break;case"toggleToolbar":n.toolbar.toggle()}};r.ready=function(){r.log.info("ready ext_comm")},r.init=function(){r.log.info("init ext_comm")};var u=function(e){d("zv",{id:e.id,shortId:e.shortId,sizes:e.sizes,instance:e.id.split(".")[1],configuration:e.conf,customTargeting:e.ct,isRotationDisabled:e.dnr,rotation:e.dnr?"Disabled":"Enabled",isFirstPrint:e.fp,isTracking:e.isTrackingUnit,visible:e.ctx.inview(),width:e.width,height:e.height})},m=function(e){d("zr",{id:e.id})},g=function(e){var t=e.ctx.currentEntry();d("zc",{id:e.id,index:t.index,wsRotation:t.wsRotation,creative:t.cid,order:t.o,orderLine:t.ol,orderType:t.ot,orderPriority:t.os,segmentId:t.sgid,pursuit:t.pursuit,type:t.typ,impressionId:t.iid,externalUrl:t.externalUrl,printOnView:t.printOnView,market:t.m,creativeWidth:t.cw,creativeHeight:t.ch,isRotationDisabled:e.dnr,rotation:e.dnr?"Disabled":"Enabled"})},f=function(e){d("st",e)};a.events.listen(a.events.eventType.instrumentationLoaded,function(){n=e.instrumentation}),d("cfg",window.__wsconf),a.events.listen(a.events.eventType.zoneView,u),a.events.listen(a.events.eventType.zoneCreated,u),a.events.listen(a.events.eventType.zoneRemoved,m),a.events.listen(a.events.eventType.bannerChange,g),a.events.listen(a.events.eventType.state,f),e.core.register(t,r)}(app,"ext_comm"),function(app,module){var instrumentation={},core=app.core,tracking=app.tracking,pageLogOpen,options,instr;pageLogOpen=JSON.parse(core.getParam("plo","pageLogOpen",0)),options=JSON.parse(core.util.cookies.readCookie("__ws_inst")||"{}");var initInstrumentation=function(){instr=new Instrumentation({operations:[],argumentsSeparator:";"}),instrumentation.toolbar={toggle:instr.toggle};var e=core.globalParameters.win.document.createElement("div");e.setAttribute("id","ws_inst_trigger"),e.onclick=function(e){e=e||window.event,e&&e.shiftKey&&instr.toggle()};var t;if(navigator.userAgent.match("iPad")){var n,i="57932",o="";t=function(e){o+=e.keyCode-48,i.match(o)?(core.timers.clear(n),o==i?instr.toggle():core.timers.timeout(function(){o=""},1e3)):o=""},core.events.listen(core.events.eventType.keypress,t)}else t=function(e){220==e.keyCode&&"undefined"!==e.ctrlKey&&e.ctrlKey&&instr.toggle()},core.events.listen(core.events.eventType.keydown,t);e.setAttribute("style","bottom:0;padding:5px;position:fixed;width:5px;height:5px;background-color:#ff0000;opacity:0.0;filter: alpha(opacity = 0);z-index:2147483647"),core.globalParameters.win.document.body&&core.globalParameters.win.document.body.appendChild(e);var r=function(e){var t=core.globalParameters.win.document.getElementById("newScriptStatus");switch(e.index){case 1:t.innerHTML="Active",t.style.color="green";break;case 0:t.innerHTML="Inactive",t.style.color="red";break;case 2:t.innerHTML="Idle",t.style.color="orange";break;default:t.innerHTML="Unknown",t.style.color="white"}};r(tracking.currentState()),core.events.listen(core.events.eventType.state,r),core.timers.timeout(function(){core.events.emit(core.events.eventType.instrumentationLoaded)},1e3)},scriptEval=function(src){return eval("var ret = "+src),ret},Instrumentation=function(e){var t,n,o,r,a,s,l,c=[],d={},p=this;this.addOper=function(e,t){f(e,t)};var u=function(t){if(""===t)return null;var n=new RegExp(e.argumentsSeparator,"g"),i=new RegExp(e.argumentsSeparator+e.argumentsSeparator,"g");return t=t.replace(n,""),t=t.replace(i,e.argumentsSeparator),t.split("")},m=function(e,a){var c,p,m,v,y;t=core.globalParameters.win.document.createElement("div"),t.innerHTML="<div style='vertical-align:middle;position: fixed;bottom:0;width: 100%;background-color:#000000;overflow:none;opacity:1;z-index:2147483647'></div>",c=t.lastChild,p=core.globalParameters.win.document.createElement("button"),p.style.fontSize="11px",p.style.margin=0,p.style.verticalAlign="baseline",p.style.display="inline",p.innerHTML="close",p.onclick=function(){e.hide()},c.appendChild(p),r=core.globalParameters.win.document.createElement("input"),r.setAttribute("type","text"),r.style.fontSize="11px",r.style.margin=0,r.style.verticalAlign="baseline",r.style.display="inline",r.style.width="250px",r.onkeydown=function(t){if(s)return!1;null==t&&(t=window.event);var n="undefined"!=typeof t.keyCode&&(null!=t.keyCode?t.keyCode:t.which);switch(n){case 13:e.exec(r.value,!0);break;case 40:"undefined"!==t.ctrlKey&&t.ctrlKey&&e.showHistory()}return!0},c.appendChild(r),m=core.globalParameters.win.document.createElement("input"),m.type="button",m.style.fontSize="11px",m.style.margin=0,m.style.verticalAlign="baseline",m.style.display="inline",m.value=">",m.onclick=function(){e.exec(r.value,!0)},c.appendChild(m),l=core.globalParameters.win.document.createElement("select"),l.style.fontSize="11px",l.style.margin=0,l.style.verticalAlign="baseline",l.style.display="inline",v=a.operations.slice(0),v.sort(function(e,t){var n,i;for(var o in e)n=o.toLowerCase();for(var o in t)i=o.toLowerCase();return n>i?1:-1});for(var h=0;h<v.length;h++)f(v[i]);c.appendChild(l),y=core.globalParameters.win.document.createElement("input"),y.type="button",y.style.fontSize="11px",y.style.margin=0,y.style.verticalAlign="baseline",y.style.display="inline",y.value=">",y.onclick=function(){e.exec2(d[g(l)],u(r?r.value:""))},c.appendChild(y),o=core.globalParameters.win.document.createElement("span"),o.setAttribute("style","color:#ffffff;font-size:10px"),c.appendChild(o),n=core.globalParameters.win.document.createElement("span"),n.setAttribute("style","color:#ff0000;font-size:10px"),c.appendChild(n);var b=core.globalParameters.win.document.createElement("span");b.setAttribute("id","version"),b.setAttribute("style","float:right;margin-right:5px;color:#ff0000;font-size:12px;align:right;valign:middle"),b.innerHTML=app.version,c.appendChild(b);var w=core.globalParameters.win.document.createElement("span");w.setAttribute("style","float:right;margin-right:5px;color:#FFFFFF;font-size:12px;align:right;valign:middle"),w.innerHTML="Status:<span id='newScriptStatus'></span>",c.appendChild(w),t.appendChild(c),core.globalParameters.win.document.body&&core.globalParameters.win.document.body.appendChild(t)},g=function(e){for(var t=0;t<e.options.length;t++)if(e.options[t].selected)return e.options[t].value;return null},f=function(e,t){d[e]=t;var n=v();l.innerHTML="";for(var i,o=0,r=n.length;o<r;o++)i=core.globalParameters.win.document.createElement("option"),i.innerHTML=o+1+". "+n[o],i.value=n[o],l.appendChild(i)},v=function(){var e=[];for(var t in d)e.push(t);return e.sort(function(e,t){return e>=t?1:-1})};this.exec=function(e,t){var n;if("."==e[0])switch(e.substring(1).toLowerCase()){case"h":this.showHistory()}else try{"undefined"!=typeof(n=scriptEval(e))&&this.msg(n),t&&c.push(e)}catch(e){this.msg(e,!0)}},this.exec2=function(e,t){var n;try{n=e(t),"undefined"==typeof n&&(n=""),this.msg(n)}catch(e){this.msg(e,!0)}},this.showHistory=function(){if(0==c.length)return void this.msg("history empty",!0);s=!0;var e,n;e=c.length-10<0?0:c.length-10,n=c.slice(e).reverse();for(var i="<div style='padding:2px 2px 2px 2px;width:100%;text-align:center;font-weight:bold'>Command History:</div>",o=0;o<n.length;o++)i+="<span style='font-weight:solid'><b>"+o+"</b> - "+n[o]+"</span></br>";var a=core.globalParameters.win.document.createElement("div");a.setAttribute("style","border:2px solid;-moz-border-radius:5px; border-radius:5px;padding:5px 5px 5px 5px;position:fixed;bottom:0;width:300px;height:180px;color=#ff0000;background-color:#58D3F7;overflow:auto;opacity:1;z-index:9999"),a.innerHTML=i,t.appendChild(a);var l=t,d=this;window.onkeydown=function(e){if(!s)return!1;null==e&&(e=window.event);var t="undefined"!=typeof e.keyCode&&(null!=e.keyCode?e.keyCode:e.which);if(!(t>=48&&t<=57||27==t))return!1;var i=!1;if(27==t)i=!0;else{var o=parseInt(String.fromCharCode(t));o<n.length&&(r.value=n[o],i=!0)}return i&&(l.removeChild(a),d.cancelEvent()),s=!1}},this.cancelEvent=function(){window.onkeydown=null},this.msg=function(e,t){var i=t?n:o;i.innerHTML="  "+e,core.timers.timeout(function(){i.innerHTML=""},3e3)},this.show=function(){t.style.display="",a=!0},this.hide=function(){t.style.display="none",a=!1},this.toggle=function(){a?p.hide():p.show()},this.clear=function(){t.innerHTML=""},m(this,e),this.hide()};instrumentation.init=function(){core.util.executeOnPredicate(function(){initInstrumentation()},function(){return core.globalParameters.win.document.body}),instrumentation.log.info("init instrumentation")},instrumentation.updateOptions=function(e,t){options[e]=t,core.util.cookies.createCookie("__ws_inst",JSON.stringify(options),1)},instrumentation.getOptions=function(){return options},instrumentation.addOper=function(e,t){instr&&instr.addOper(e,t)},instrumentation.pageLogger=function(){var e,t,n,i=0,o=[],r={messages:null,events:null,visibility:null,errors:null,params:null},a=function(){e=core.globalParameters.win.document.createElement("DIV"),e.style.position="fixed",e.style.width="100%",e.style.height="180px",e.style.bottom="25px",e.style.backgroundColor="PaleGreen",e.style.opacity="0.9",e.style.zIndex=2147483647,core.globalParameters.win.document.body.appendChild(e);var i=core.globalParameters.win.document.createElement("DIV");i.style.width="100%",i.style.height="20px",i.style.borderBottom="1px solid black",i.style.fontSize="14px",e.appendChild(i);var o=core.globalParameters.win.document.createElement("DIV");o.style.width="100%",o.style.position="absolute",o.style.top="20px",o.style.bottom="0px",o.style.overflowY="scroll",e.appendChild(o);for(var a in r){var s=core.globalParameters.win.document.createElement("SPAN");s.style.height="100%",s.style.borderWidth="1px 1px 0px 0px",s.style.fontSize="16px",s.style.borderStyle="solid",s.style.textAlign="center",s.style.display="inline",s.style.width="75px",s.style.padding="0px 5px",s.style.cursor="pointer",s.innerHTML=a,core.util.bind(s,"click",function(e){var t=e.target||e.srcElement;p(t.innerHTML)}),i.appendChild(s),r[a]=core.globalParameters.win.document.createElement("OL"),r[a].reversed="true",r[a].style.display="none",r[a].style.left="0px",r[a].style.right="0px",r[a].style.height="100%",o.appendChild(r[a])}r.messages.style.display="block",n="messages";var l=core.globalParameters.win.document.createElement("DIV");l.style.right="20px",l.style.height="20px",l.style.display="inline-block",l.style.position="absolute",l.innerHTML="Filter: ",i.appendChild(l),t=core.globalParameters.win.document.createElement("INPUT"),t.style.fontSize="16px",t.type="text",l.appendChild(t);var c=core.globalParameters.win.document.createElement("INPUT");c.type="button",c.style.fontSize="16px",c.value=">",l.appendChild(c),c.onclick=function(){for(var e=0;e<r[n].childNodes.length;e++)r[n].childNodes[e].style.display=r[n].childNodes[e].innerHTML.match(t.value)?"":"none"};var d=core.globalParameters.win.document.createElement("INPUT");d.type="button",d.style.fontSize="16px",d.value="clear",l.appendChild(d),d.onclick=function(){for(var e=r[n].childNodes.length;e>0;e--)r[n].removeChild(r[n].childNodes[e-1])}},s=function(){for(var e=0;e<o.length;e++)u(o[e].tab,o[e].message,!0)},l=function(){e.style.display="block"},c=function(){e.style.display="none"},d=function(){switch(i){case 0:a(),i=2,s(),instrumentation.updateOptions("pageLogToggled",1);break;case 1:l(),i=2,instrumentation.updateOptions("pageLogToggled",1);break;case 2:c(),instrumentation.updateOptions("pageLogToggled",0),i=1}},p=function(e){r[n].style.display="none",r[e].style.display="",n=e},u=function(e,n,a){if(n=a?n:core.util.genDate()+n,0==i)o.push({tab:e,message:n});else{var s=core.globalParameters.win.document.createElement("LI");s.style.margin="5px 5px 0px 5px",s.style.fontSize="16px",s.innerHTML=n,s.style.display=n.match(t.value)?"":"none",r[e].insertBefore(s,r[e].firstChild)}};return core.events.listen(core.events.eventType.instrumentationLoaded,function(){instrumentation.addOper("PageLog - Toggle",d),0!=pageLogOpen||options.pageLogToggled&&d()}),u}(),core.events.listen(core.events.eventType.zoneView,function(e){instrumentation.pageLogger("visibility","Zone "+e.id+": "+(e.ctx.inview()?"IN":"OUT"))}),core.register(module,instrumentation)}(app,"instrumentation"),function(e,t){var n=e.core;n.globalParameters.win.__WSLoaded||(n.globalParameters.win.__WSLoaded=!0,n.init())}(app,"wrapup")}();